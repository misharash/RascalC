## MAKEFILE FOR RascalC. This compiles the triple_counts.cpp file into the ./triple exececutable and is for use with Macs.

CC = gcc
CFLAGS = -Wall -O3 -MMD
CXXFLAGS = -Wall -O3 -MMD -DOPENMP
#-DOPENMP # use this to run multi-threaded with OpenMP
#-DPERIODIC # use this to enable periodic behavior

# Here we use LLVM compiler to load the Mac OpenMP. Tested after installation commands:
# brew install llvm
# brew install libomp
# This may need to be modified with a different installation
CXX = /usr/local/opt/llvm/bin/clang++ -std=c++0x -fopenmp -ffast-math $(shell pkg-config --cflags gsl)

AUNTIE	= triple
AOBJS	= triple_counts.o ../cubature/hcubature.o ../ransampl/ransampl.o
ADEPS   = ${AOBJS:.o=.d}

# These two lines might also need adjustment with a different OpenMP setup
LD	= /usr/local/opt/llvm/bin/clang++
LFLAGS	= $(shell pkg-config --libs gsl) -fopenmp -lomp

.PHONY: main clean

main: $(AUNTIE)

$(AUNTIE):	$(AOBJS) Makefile_mac
	$(LD) $(AOBJS) $(LFLAGS) -o $(AUNTIE)

clean:
	rm -f ${AUNTIE} ${AOBJS} ${ADEPS}

$(AOBJS): Makefile_mac
-include ${ADEPS}
